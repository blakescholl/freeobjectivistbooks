<% content_for :title do %>Sign Up to Donate<% end %>

<% content_for :stylesheet do %>
<style>
.page-explanation {
    font-size: 1.4em;
    padding-top: 12px;
    margin-bottom: 0;
    list-style: none;
}

.page-explanation li {
    margin: 0;
}

.pledge-explanation {
    padding-top: 10px;
}

.submit {
    height: 56px;
    margin-top: 24px;
    background-image: url(/assets/signup-button.png);
}
</style>
<% end %>

<h1 class="grid_16">Sign up to donate Objectivist books</h1>
<ul class="grid_12 page-explanation">
    <li>We'll send you a link to browse students and their requests.</li>
    <li>You will send the books to them directly.</li>
    <li>You will <em>not</em> send money to us or to any student.</li>
</ul>
<div class="clear"></div>

<%= form_for @user, url: { action: :submit } do |f| %>
    <% unless @user.errors.empty? && @pledge.errors.empty? %>
    <div class="grid_8 errorExplanation">
        <h2>There were problems with your signup</h2>
        <p>Please see below and make corrections.</p>
    </div>
    <div class="clear"></div>
    <% end %>

    <h2 class="grid_16">Public profile</h2>

    <%= f.label :name, class: "grid_5" %><div class="clear"></div>
    <%= f.text_field :name, class: "grid_5", placeholder: "Individual or couple" %>
    <span class="grid_4 field_with_errors"><%= @user.errors[:name].join(", ") %></span>
    <div class="clear"></div>

    <%= f.label :location, class: "grid_5" %><div class="clear"></div>
    <%= f.text_field :location, class: "grid_5", placeholder: "City and state or country" %>
    <span class="grid_4 field_with_errors"><%= @user.errors[:location].join(", ") %></span>
    <div class="clear"></div>

    <h2 class="grid_16">Private account info</h2>

    <%= f.label :email, class: "grid_5" %><div class="clear"></div>
    <%= f.text_field :email, class: "grid_5" %>
    <span class="grid_4 field_with_errors"><%= @user.errors[:email].join(", ") %></span>
    <div class="clear"></div>

    <%= f.label :password, class: "grid_5" %><div class="clear"></div>
    <%= f.password_field :password, class: "grid_5", placeholder: "So you can log in later" %>
    <span class="grid_4 field_with_errors"><%= @user.errors[:password].join(", ") %></span>
    <div class="clear"></div>

    <%= f.label :password_confirmation, "Confirm password", class: "grid_5" %><div class="clear"></div>
    <%= f.password_field :password_confirmation, class: "grid_5" %>
    <span class="grid_4 field_with_errors"><%= @user.errors[:password_confirmation].join(", ") %></span>
    <div class="clear"></div>

    <h2 class="grid_16">Your pledge</h2>
    <%= fields_for @pledge do |p| %>
    <p class="grid_8 field_with_errors"><%= @pledge.errors[:quantity].join(", ") %></p><div class="clear"></div>
    <label class="grid_8">I pledge to donate <%= p.text_field :quantity, size: 1 %> books to students.</label>
    <div class="clear"></div>
    <p class="grid_16 pledge-explanation">You can usually buy books for $5 to $10 a copy.</p>

    <h2 class="grid_16">Why do you want to donate Objectivist books? (optional)</h2>

    <p class="grid_8 field_with_errors"><%= @pledge.errors[:reason].join(", ") %></p>
    <%= p.text_area :reason, class: "grid_8", rows: 6 %><div class="clear"></div>
    <% end %>

    <%= hidden_field_tag :from_action, "donate" %>
    <%= f.submit "", class: "grid_4 submit button" %><div class="clear"></div>
<% end %>
